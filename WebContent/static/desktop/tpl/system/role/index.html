<div class="sysrole-container clearfix" id="sysrole-container">

    <div class="sysrole-tree" id="sysRoleTree">
        <div class="sysrole-tree-ope input-group">

            <div class="input-group">
                <input type="text" class="da-form-control" id="createSysRoleInput" placeholder="角色名" title="新建角色：请输入角色名">
                <span class="input-group-btn">
                    <button type="button" class="btn btn-success-2" title="添加角色"
                            id="createSysRoleButton"><i class="fa fa-plus"></i></button>
                </span>
            </div>
        </div>
        <ul class="sysrole-tree-list"
            data-list-url="__CTX__/admin/getAllSysRole"
            data-delete-url="__CTX__/admin/sysRoleDelete"
            data-save-url="__CTX__/admin/sysRoleSave"
            data-view-url="__CTX__/static/desktop/tpl/system/role/edit.html"
            data-model-url="__CTX__/admin/sysRoleModel">

        </ul>
    </div>

    <div class="sysrole-content" id="sysroleContent">

        <!-- Nav tabs -->
        <ul class="nav nav-tabs" role="tablist" id="sysRoleTablist">
            <li class="active"><a href="#sysroleRelUser" role="tab"><i class="fa fa-users"></i> 关联用户</a></li>
            <li><a href="#sysroleRelMenu" role="tab" ><i class="fa fa-link"></i> 菜单权限</a></li>
            <li><a href="#sysroleRelResource" role="tab" ><i class="fa fa-cubes"></i> 资源权限</a></li>
            <li><a href="#sysroleRelPermit" role="tab" ><i class="fa fa-wrench"></i> 数据权限</a></li>
        </ul>
        <!-- /Nav tabs -->

        <!-- Tab panes -->
        <div class="tab-content">
            <!-- 关联用户 -->
            <div role="tabpanel" class="tab-pane active" id="sysroleRelUser">

                <div class="win-btnGroup">

                    <button type="button" id="sysRoleUser-addBtn" class="btn btn-success-2 hidden"
                            data-options='{
                                "url": "__CTX__/admin/sysRoleUserSave"
                            }'
                    ><i class="fa fa-plus"></i> 添加用户到角色</button>

                    <button type="button" id="sysRoleUser-removeBtn" class="btn btn-danger-2"
                            data-options='{
                                "url": "__CTX__/admin/sysRoleUserDelete"
                            }'
                    ><i class="fa fa-trash-o"></i> 从角色中删除用户</button>

                    <form id="sysRoleUserQueryForm">

                        <button class="btn btn-default-2 pull-right" style="margin-left: 6px;" type="button"
                                onclick='jQuery( "#sysRoleUserDatagrid" ).bootgrid( "reload" );'><i class="fa fa-refresh"></i></button>

                        <div class="input-group pull-right" style="width: 280px;">

                            <!-- roleId 无值时，是查不到数据的-->
                            <input type="hidden" id="sysRoleUser-roleId" name="roleId"/>

                            <input type="text" class="da-form-control" placeholder="真实姓名" name="userName" data-operator="like" value="">
                            <span class="input-group-btn">
                                <button class="btn btn-info-2" type="button" id="sysRoleUserDatagrid-reloadBtn"
                                        onclick='jQuery( "#sysRoleUserDatagrid" ).bootgrid( "reload" )'><i class="fa fa-search"></i></button>
                            </span>
                        </div>
                        <div class="da-form-radio pull-right" style="margin: 5px 12px 0 0;">
                            <!-- in / notIn -->
                            <span>是否拥有该角色：</span>
                            <label><input type="radio" name="roleIdOper" value="in" class="roleIdOper checked" checked/>是</label>
                            <label><input type="radio" name="roleIdOper" value="notIn" class="roleIdOper"/>否</label>
                        </div>
                    </form>
                </div>


                <table id="sysRoleUserDatagrid"
                       data-pkui-component="datagrid"
                       data-pkui-component-options='{
                            "selection": true,
                            "multiSelect": true
                       }'
                       data-url="__CTX__/admin/sysRoleUserListData"
                       data-query-form-selector="#sysRoleUserQueryForm">
                    <thead>
                    <tr>
                        <th data-column-id="userId" data-identifier="true" data-visible="false" data-sortable="false">用户标识号</th>
                        <th data-column-id="loginName" data-sortable="false" data-width="120">登录名</th>
                        <th data-column-id="userName" data-sortable="false" data-width="120">真实姓名</th>
                        <th data-column-id="policeCode" data-sortable="false" data-width="100">警号</th>
                        <th data-column-id="deptId" data-sortable="false" data-dic="DIC_DEPT">所属单位</th>
                        <th data-column-id="userType" data-sortable="true" data-dic="DIC_USER_TYPE" data-width="100">用户类型</th>
                        <th data-column-id="status" data-sortable="true" data-formatter="statusFormatter" data-width="80">状态</th>
                        <th data-column-id="addTime" data-sortable="true" data-formatter="dateFormatter" data-width="140">录入时间</th>
                    </tr>
                    </thead>

                </table>
            </div>
            <!-- 菜单权限 -->
            <div role="tabpanel" class="tab-pane" id="sysroleRelMenu">

                <div class="tab-pane-heading">
                    <button type="button" class="btn btn-success-2 " id="sysroleRelMenu-saveBtn"
                        data-options='{
                            "url": "__CTX__/admin/sysRoleMenuSave"
                        }'
                    ><i class="fa fa-save"></i> 保存</button>
                </div>
                <div class="tab-pane-body">
                    <div id="sysroleRelMenu-treeContainer"
                         data-options='{
                            "url": "__CTX__/admin/sysRoleMenuListData",
                            "jstreeOptions": {
                                "openAll": true,
                                "dblclick_toggle": false
                            }
                         }'></div>
                </div>


            </div>
            <!-- 资源权限 -->
            <div role="tabpanel" class="tab-pane" id="sysroleRelResource">

                <div class="tab-pane-heading">
                    <button type="button" class="btn btn-success-2 " id="sysroleRelResource-saveBtn"
                            data-options='{
                            "url": "__CTX__/admin/sysRoleResouceSave"
                        }'
                    ><i class="fa fa-save"></i> 保存</button>
                </div>
                <div class="tab-pane-body">
                    <div id="sysroleRelResource-treeContainer"
                         data-options='{
                            "url": "__CTX__/admin/sysRoleResouceListData",
                            "jstreeOptions": {
                                "openAll": false,
                                "dblclick_toggle": false
                            }
                         }'></div>
                </div>

            </div>
            <!-- 数据权限 -->
            <div role="tabpanel" class="tab-pane" id="sysroleRelPermit">

                <div class="tab-pane-heading">
                    <button type="button" class="btn btn-success-2 " id="sysroleRelPermit-saveBtn"
                            data-options='{
                            "url": "__CTX__/admin/sysRolePermitSave"
                        }'
                    ><i class="fa fa-save"></i> 保存</button>
                </div>
                <div class="tab-pane-body">
                    <div id="sysroleRelPermit-treeContainer"
                         data-options='{
                            "url": "__CTX__/admin/sysRolePermitListData",
                            "jstreeOptions": {
                                "openAll": false,
                                "dblclick_toggle": false
                            }
                         }'></div>
                </div>

            </div>
        </div>

    </div>

</div>
<style>
    .sysrole-container {
        margin: 0 -12px;
        overflow: hidden;
        height: 100%;
    }
    .sysrole-tree {
        position: relative;
        overflow: auto;
        float: left;
        width: 240px;
        height: 100%;
        border-right: 1px solid silver;
    }
    .sysrole-tree-ope {
        position: absolute;
        top: 0;
        left: 0;
        z-index: 10;
        width: 228px;
        padding: 6px 6px;
        background: #f0f0f0;
    }
    .sysrole-tree-list {
        margin-top: 40px;
    }
    .sysrole-tree-item {
        position: relative;
    }
    .sysrole-tree-item.active .sysrole-item-ope,
    .sysrole-tree-item:hover .sysrole-item-ope {
        display: inline-block;
    }
    .sysrole-item-ope {
        display: none;
        position: absolute;
        top: 2px;
        right: 6px;
        width: 28px;
        height: 28px;
        line-height: 28px;
        text-align: center;
        color: #fff;
        border-radius: 1px;
    }
    .sysrole-item-ope-edit {
        right: 36px;
        background: #40b2cc;
    }
    .sysrole-item-ope-edit:hover {
        background: #2e94ab;
    }
    .sysrole-item-ope-delete {
        background: #fa8a48;
    }
    .sysrole-item-ope-delete:hover {
        background: #f96a16;
    }

    .sysrole-tree-item-editable .sysrole-tree-anchor > .fa,
    .sysrole-tree-item-editable.sysrole-tree-item .sysrole-item-ope {
        display: none;
    }
    .sysrole-tree-item .edit-input {
        display: none;
    }
    .sysrole-tree-item-editable .edit-input {
        display: table;
    }
    .sysrole-tree-anchor {
        display: block;
        padding: 6px;
    }
    .sysrole-tree-anchor > .fa {
        margin-right: .5em;
    }
    .sysrole-tree-item:hover .sysrole-tree-anchor {

    }
    .sysrole-tree-item.active .sysrole-tree-anchor {
        color: #fff;
        background-color: #33a6e7;
    }

    .sysrole-content {
        height: 100%;
        overflow: auto;
    }
    .sysrole-content .nav-tabs {
        z-index: 3;
        position: absolute;
        width: 100%;
        background-color: #fff;
    }
    .sysrole-content .tab-content {
        border: none 0;
        padding-top: 42px;
    }
    .sysrole-content .tab-pane {
        padding: 6px;
    }

    .sysrole-content .tab-pane-heading {
        padding: 6px;
    }

    .sysrole-content .tab-pane-body {
        padding: 6px;
    }


</style>
<script>
    seajs.use( [ "__CTX__/static/desktop/js/page/sysRole" ], function ( SysRole ) {
        SysRole.init();
    } );
</script>