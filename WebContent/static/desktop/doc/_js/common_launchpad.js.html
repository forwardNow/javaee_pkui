<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>common/launchpad.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="App.html">App</a><ul class='methods'><li data-type='method'><a href="App.html#.init">init</a></li><li data-type='method'><a href="App.html#show">show</a></li></ul></li><li><a href="AppDock.html">AppDock</a><ul class='methods'><li data-type='method'><a href="AppDock.html#show">show</a></li></ul></li><li><a href="AppWindow.html">AppWindow</a><ul class='methods'><li data-type='method'><a href="AppWindow.html#show">show</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-base_utils.html">base/utils</a><ul class='methods'><li data-type='method'><a href="module-base_utils.html#getOptionsFromTag">getOptionsFromTag</a></li><li data-type='method'><a href="module-base_utils.html#getPageWidth">getPageWidth</a></li></ul></li><li><a href="module-common_launchpad.html">common/launchpad</a></li><li><a href="module-common_template.html">common/template</a><ul class='methods'><li data-type='method'><a href="module-common_template.html#getTemplate">getTemplate</a></li><li data-type='method'><a href="module-common_template.html#setOptions">setOptions</a></li></ul></li><li><a href="module-main.html">main</a></li><li><a href="module-page_app.html">page/app</a></li><li><a href="module-page_app-dock.html">page/app-dock</a></li><li><a href="module-page_app-window.html">page/app-window</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">common/launchpad.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @fileOverview 应用启动面板
 * @author 吴钦飞(wuqf@pkusoft.net)
 * @module module:common/launchpad
 * @requires jquery
 * @requires swiper
 * @requires jquery-ui
 * @requires module:base/utils
 *
 */
define( function ( require ) {
    var $,
        Swiper,
        Launchpad,
        Utils
        ;
    $ = require( "jquery" );
    Swiper = require( "swiper" );
    require( "jquery-ui" );
    Utils = require( "../base/utils" );

    /**
     * 应用启动面板单例
     * @exports module:common/launchpad
     */
    Launchpad = {
        swiper: null,
        previousBtn: ".launchpad-pagination-previous",
        nextBtn: ".launchpad-pagination-next",
        pagination: ".launchpad-pagination-switchList",
        shortcut: ".launchpad-shortcut",
        // 定义一个参数：翻页的时间间隔
        intervalWhenSort: 1000,
        isSwippingWhenSort: false,
        init: function () {
            this.render();
            this.bind();
        },
        render: function () {
            this.previousBtn = $( this.previousBtn );
            this.nextBtn = $( this.nextBtn );
            this.shortcut = $( this.shortcut );
        },
        bind: function () {
            var _this;
            _this = this;
            this.swiper = new Swiper( ".swiper-container", {
                // eventTarget : 'wrapper',
                // noSwiping : true,
                pagination: this.pagination,
                loop: false,
                grabCursor: true,
                paginationClickable: true,
                releaseElementsClass: "launchpad-shortcut"
            } );
            this.previousBtn.on( "click", function ( e ) {
                e.preventDefault();
                _this.swiper.swipePrev();
            } );
            this.nextBtn.on( "click", function ( e ) {
                e.preventDefault();
                _this.swiper.swipeNext();
            } );
            // 拖拽排序
            $( ".launchpad-shortcutpad" ).sortable( {
                appendTo: document.body,
                helper: "clone",
                connectWith: ".launchpad-shortcutpad",
                handle: ".launchpad-shortcut-icon",
                placeholder: "launchpad-shortcut-placeholder",
                scroll: false,
                // 拖拽到页面边界会发生翻页，翻页时间间隔是1秒
                sort: function ( event /*, ui */ ) {
                    var x;
                    if ( _this.isSwippingWhenSort ) {
                        return;
                    }
                    x = event.pageX;
                    if ( x === 20 ) {
                        _this.previousBtn.trigger( "click" );
                    }
                    if ( x + 20 === Utils.getPageWidth() ) {
                        _this.nextBtn.trigger( "click" );
                    }

                    if ( x === 20 || x + 20 === Utils.getPageWidth ) {
                        _this.isSwippingWhenSort = true;
                        window.setTimeout( function () {
                            _this.isSwippingWhenSort = false;
                        }, _this.intervalWhenSort );
                    }
                }
            } ).disableSelection();
        }
    };

    return Launchpad;
} );
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Sat Feb 25 2017 12:06:07 GMT+0800 (CST) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
